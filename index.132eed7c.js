const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),o=document.getElementById("loader"),a=document.querySelector(".notitle"),l="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let i={};async function c(e){try{r();const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${l}&language=en-US&query=${e}&page=1&include_adult=false`),o=(await t.json()).results;s(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:o,release_date:a,genre_ids:l}=e;if(!a||!n||0===l.length)return"";const c=`https://image.tmdb.org/t/p/w500/${n}`,r=new Date(a).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${c}" loading="lazy" />\n    <h4 class="gallery__item-header">${o}</h4>\n    <span class="gallery__item-info">${l.map((e=>i[e])).slice(0,2).join(", ")}</span>\n    <span class="gallery__item-info">${r}</span>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(o),0===o.length?(s(),d(),n.innerHTML='<p class="myfriend"></p>'):u()}catch(e){console.log(e.toString()),s(),d()}}function r(){o.style.display="flex"}function s(){o.style.display="none"}function d(){a.innerText="Search result not successful. Enter the correct movie name.",a.style.display="block"}function u(){a.style.display="none"}s(),e.addEventListener("submit",(e=>{e.preventDefault();c(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l}&language=en-US`),t=(await e.json()).genres;for(const e of t)i[e.id]=e.name}catch(e){console.log(e.toString())}}();const m="e7c806d7ce9bbdf1ef93bebcabbfe0f1",g=document.querySelector(".gallery");!async function(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${m}&page=${e}`),n=await t.json(),o=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${m}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();(function(e,t){g.innerHTML="";const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear();return`\n <a class="gallery__link">\n <div class="gallery__item" id="${o}">\n <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n <h4 class="gallery__item-header">${a}</h4>\n <span class="gallery__item-info">${t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n <span class="gallery__item-info">${c}</span>\n </div>\n </a>\n `})).join("");g.insertAdjacentHTML("afterbegin",n)})(n.results,o)}catch(e){console.log(e)}}();const y=document.querySelector(".btnUp");function p(){window.scrollTo({top:0,behavior:"smooth"})}y.style.display="none",window.onscroll=function(){!function(){document.documentElement.scrollTop>200?y.style.display="block":y.style.display="none";y.addEventListener("click",p)}()};const f=document.querySelector(".toggle-icon-sun"),_=document.querySelector(".day-night-switch");function h(){document.body.classList.add("dark__theme"),f.classList.remove("toggle-icon-sun"),f.classList.add("toggle-icon-moon")}function v(){document.body.classList.remove("dark__theme"),f.classList.remove("toggle-icon-moon"),f.classList.add("toggle-icon-sun")}null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode","false"),"true"===localStorage.getItem("darkMode")?(h(),_.checked=!0):(v(),_.checked=!1),_.addEventListener("change",(()=>{_.checked?h():v(),localStorage.setItem("darkMode",_.checked)}));const b=document.querySelector(".backdrop"),S=document.querySelector(".modal__btnClose"),k=document.querySelector(".modal__btnWatched"),w=document.querySelector(".modal__btnQueue"),$=document.querySelector(".modal__moviePoster"),q=document.querySelector(".modal__title"),L=document.querySelector(".modal__about"),E=document.querySelector(".modal__genre"),j=document.querySelector(".modal__votes"),M=document.querySelector(".modal__popularity"),I=document.querySelector(".modal__originalTitle");let T;async function C(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1`);return await t.json()}catch(e){console.log(e)}}function H(){b.classList.toggle("is-hidden")}gallery.addEventListener("click",(function(e){e.target.matches("img")&&(T=e.target.parentNode.id,C(T).then((e=>{$.setAttribute("src",`https://image.tmdb.org/t/p/w500/${e.poster_path}`),q.textContent=e.title,j.textContent=`${e.vote_average}/ ${e.vote_count}`,M.textContent=e.popularity,I.textContent=e.original_title,L.textContent=e.overview,E.textContent=e.genres[0].name})),H())})),S.addEventListener("click",H),k.addEventListener("click",(function(){let e=[];localStorage.getItem("watched-films")&&(e=JSON.parse(localStorage.getItem("watched-films"))),C(T).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("watched-films",JSON.stringify(e))}))})),w.addEventListener("click",(function(){let e=[];localStorage.getItem("queued-films")&&(e=JSON.parse(localStorage.getItem("queued-films"))),C(T).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("queued-films",JSON.stringify(e))}))})),document.addEventListener("keydown",(function(e){27!==e.keyCode||b.classList.contains("is-hidden")||H()})),b.addEventListener("click",(function(e){e.target===b&&H()}));const x=document.querySelector(".modal-footer"),A=(document.querySelector(".close-footer"),document.querySelector(".open-modal")),D=document.querySelector(".close-modal");A.addEventListener("click",(()=>{x.style.display="block"})),D.addEventListener("click",(()=>{x.style.display="none"}));const F=document.querySelector(".gallery"),N=document.querySelector(".genre"),J="6fc014c055bacb8460b83603c43b9093";let O="";N.addEventListener("change",(function(e){F.innerHTML="",u(),O=e.target.value,async function(e){try{r();const t=function(e){return{Action:28,Adventure:12,Animation:16,Comedy:35,Crime:80,Documentary:99,Drama:18,Family:10751,Fantasy:14,History:36,Horror:27,Music:10402,Mystery:9648,Romance:10749,"Science Fiction":878,"TV Movie":10770,Thriller:53,War:10752,Western:37}[e]}(e),n=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${J}&with_genres=${t}`),o=await n.json(),a=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${J}`);return(await e.json()).genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear(),r=t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ");return`\n        <a class="gallery__link">\n          <div class="gallery__item" id="${o}">\n            <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n            <h4 class="gallery__item-header">${a}</h4>\n            <span class="gallery__item-info">${r}</span>\n            \n            <span class="gallery__item-info">${c}</span>\n            \n          </div>\n        </a>\n      `})).join("");F.insertAdjacentHTML("afterbegin",n)})(o.results,a),s()}catch(e){console.log(e)}}(O)}));
//# sourceMappingURL=index.132eed7c.js.map
