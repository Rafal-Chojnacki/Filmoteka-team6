const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),a=document.getElementById("loader"),i=document.querySelector(".notitle"),s="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let l={};async function o(e){try{a.style.display="flex";const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${s}&language=en-US&query=${e}&page=1&include_adult=false`),o=(await t.json()).results;c(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:a,release_date:i,genre_ids:s}=e;if(!i||!n||0===s.length)return"";const o=`https://image.tmdb.org/t/p/w500/${n}`,c=new Date(i).getFullYear();return`\n    <a class="gallery__link">\n      <div class="gallery-item" id="${t}">\n        <img class="gallery-item__img" src="${o}" loading="lazy" />\n        <p class="info-item">${a}</p>\n        <p class="info-item">${s.map((e=>l[e])).slice(0,2).join(", ")}</p>\n        <p class="info-item">${c}</p>\n      </div>\n    </a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(o),0===o.length?(c(),r()):i.style.display="none"}catch(e){console.log(e.toString()),c(),r()}}function c(){a.style.display="none"}function r(){i.innerText="Search result not successful. Enter the correct movie name.",i.style.display="block"}c(),e.addEventListener("submit",(e=>{e.preventDefault();o(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${s}&language=en-US`),t=(await e.json()).genres;for(const e of t)l[e.id]=e.name}catch(e){console.log(e.toString())}}();const g="e7c806d7ce9bbdf1ef93bebcabbfe0f1",d=document.querySelector(".gallery");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${g}`),t=await e.json(),n=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${g}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:a,title:i,release_date:s,genre_ids:l}=e,o=new Date(s).getFullYear();return`\n          <a class="gallery__link">\n            <div class="gallery__item" id="${a}">\n              <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n              <h4 class="gallery__item-header">${i}</h4>\n              <span class="gallery__item-info">${t.filter((e=>l.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n              \n              <span class="gallery__item-info">${o}</span>\n              \n            </div>\n          </a>\n        `})).join("");d.insertAdjacentHTML("afterbegin",n)})(t.results,n)}catch(e){console.log(e)}}();
//# sourceMappingURL=index.489883f0.js.map
