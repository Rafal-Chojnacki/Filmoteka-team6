const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),a=document.getElementById("loader"),o=document.querySelector(".notitle"),l="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let i={};async function c(e){try{a.style.display="flex";const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${l}&language=en-US&query=${e}&page=1&include_adult=false`),c=(await t.json()).results;r(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:a,release_date:o,genre_ids:l}=e;if(!o||!n||0===l.length)return"";const c=`https://image.tmdb.org/t/p/w500/${n}`,r=new Date(o).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${c}" loading="lazy" />\n    <h4 class="gallery__item-header">${a}</h4>\n    <span class="gallery__item-info">${l.map((e=>i[e])).slice(0,2).join(", ")}</span>\n    <span class="gallery__item-info">${r}</span>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(c),0===c.length?(r(),s()):o.style.display="none"}catch(e){console.log(e.toString()),r(),s()}}function r(){a.style.display="none"}function s(){o.innerText="Search result not successful. Enter the correct movie name.",o.style.display="block"}r(),e.addEventListener("submit",(e=>{e.preventDefault();c(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l}&language=en-US`),t=(await e.json()).genres;for(const e of t)i[e.id]=e.name}catch(e){console.log(e.toString())}}();const d="e7c806d7ce9bbdf1ef93bebcabbfe0f1",u=document.querySelector(".gallery");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${d}`),t=await e.json(),n=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${d}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:a,title:o,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear();return`\n          <a class="gallery__link">\n            <div class="gallery__item" id="${a}">\n              <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n              <h4 class="gallery__item-header">${o}</h4>\n              <span class="gallery__item-info">${t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n              \n              <span class="gallery__item-info">${c}</span>\n              \n            </div>\n          </a>\n        `})).join("");u.insertAdjacentHTML("afterbegin",n)})(t.results,n)}catch(e){console.log(e)}}();const m=document.querySelector(".backdrop"),g=document.querySelector(".modal__btnClose"),y=document.querySelector(".modal__btnWatched"),p=document.querySelector(".modal__btnQueue"),_=document.querySelector(".modal__moviePoster"),f=document.querySelector(".modal__title"),h=document.querySelector(".modal__about"),b=document.querySelector(".modal__genre"),v=document.querySelector(".modal__votes"),S=document.querySelector(".modal__popularity"),$=document.querySelector(".modal__originalTitle");let w,q=[],k=[];async function j(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1`);return await t.json()}catch(e){console.log(e)}}function E(){m.classList.toggle("is-hidden")}gallery.addEventListener("click",(function(e){e.target.matches("img")&&(w=e.target.parentNode.id,j(w).then((e=>{_.setAttribute("src",`https://image.tmdb.org/t/p/w500/${e.poster_path}`),f.textContent=e.title,v.textContent=`${e.vote_average}/ ${e.vote_count}`,S.textContent=e.popularity,$.textContent=e.original_title,h.textContent=e.overview,b.textContent=e.genres[0].name,console.log(e)})),E())})),g.addEventListener("click",E),y.addEventListener("click",(function(){j(w).then((e=>{k.push(e),localStorage.setItem("watched-films",JSON.stringify(k))}))})),p.addEventListener("click",(function(){j(w).then((e=>{q.push(e),localStorage.setItem("queued-films",JSON.stringify(q))}))}));
//# sourceMappingURL=index.a539fdac.js.map
