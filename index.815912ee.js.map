{"mappings":"AAAA,MAAMA,EAAaC,SAASC,eAAe,eACrCC,EAAcF,SAASG,cAAc,UACrCC,EAAUJ,SAASC,eAAe,WAClCI,EAASL,SAASC,eAAe,UACjCK,EAAUN,SAASG,cAAc,YAMvCI,eAAeC,EAAaC,GAC1B,IACE,MAAMC,QAAiBC,MAAM,2GAA2GF,gCAElIG,SADaF,EAASG,QACRC,QAEpB,GAAsB,IAAlBF,EAAOG,OAGT,OAFAC,SACAC,IAIF,MAAMC,EAAgBN,EAAOO,KAAIC,GACxBC,QAAQC,IAAI,CACjBC,EAAcH,EAAMI,WACpBJ,MAiENf,EAAOoB,MAAMC,QAAU,OA3DrB,MACMC,SADyBN,QAAQC,IAAIJ,IACQC,KAAI,EAAES,EAAQR,MAC/D,MAAMS,GAAEA,EAAEC,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,GAAiBZ,EACjD,IAAKY,IAAiBF,GAAiC,IAAlBF,EAAOb,OAC1C,MAAO,GAET,MAAMkB,EAAY,mCAAmCH,IAC/CI,EAAiB,IAAIC,KAAKH,GAAcI,cAG9C,MAAO,gFAE6BP,wDACQI,0DACfF,2CANLH,EAAOS,MAAM,EAAG,GAAGC,KAAK,+CAQnBJ,+CAG5B,IAGHjB,IA4BJ,SAAuBL,GACrBR,EAAQmC,UAAY,GAEpB,MAAMC,EAAS5B,EAAO0B,KAAK,IAE3BlC,EAAQqC,mBAAmB,YAAaD,EAC1C,CAjCIE,CAAcf,GAiDhBrB,EAAQmB,MAAMC,QAAU,MA3CxB,CAJE,MAAOiB,GACPC,QAAQC,IAAIF,EAAMG,YAClB7B,IACAD,GACF,CACF,CAEAT,eAAegB,EAAcwB,GAC3B,IACE,MAAMrC,QAAiBC,MAAM,yGAEvBiB,SADalB,EAASG,QACRe,OAOpB,OALmBmB,EAAS5B,KAAI6B,IAC9B,MAAMC,EAAQrB,EAAOsB,MAAKD,GAASA,EAAMpB,KAAOmB,IAChD,OAAOC,EAAQA,EAAME,KAAO,EAAE,IAGdC,QAAOD,GAAiB,KAATA,GAInC,CAHE,MAAOR,GAEP,OADAC,QAAQC,IAAIF,EAAMG,YACX,EACT,CACF,CAcA,SAAS7B,IACPZ,EAAOoB,MAAMC,QAAU,MACzB,CAEA,SAASV,IACPV,EAAQ+C,UAAY,6DACpB/C,EAAQmB,MAAMC,QAAU,OAC1B,CA7FAT,IAmGAlB,EAAWuD,iBAAiB,UAAUC,IACpCA,EAAEC,iBAEFhD,EADcN,EAAYuD,OAE1BvD,EAAYuD,MAAQ","sources":["src/js/header.js"],"sourcesContent":["const searchForm = document.getElementById('search-form');\nconst searchInput = document.querySelector('.input');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\nconst notitle = document.querySelector('.notitle');\n\n\nhideLoader();\n\n\nasync function searchMovies(query) {\n  try {\n    const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1&language=en-US&query=${query}&page=1&include_adult=false`);\n    const data = await response.json();\n    const movies = data.results;\n\n    if (movies.length === 0) {\n      showNoTitleMessage();\n      hideLoader();\n      return;\n    }\n\n    const moviePromises = movies.map(movie => {\n      return Promise.all([\n        getGenreNames(movie.genre_ids),\n        movie\n      ]);\n    });\n\n    showLoader();\n\n    const moviesWithGenres = await Promise.all(moviePromises);\n    const moviesWithGenresFormatted = moviesWithGenres.map(([genres, movie]) => {\n      const { id, poster_path, title, release_date } = movie;\n      if (!release_date || !poster_path || genres.length === 0) {\n        return '';\n      }\n      const posterUrl = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n      const productionYear = new Date(release_date).getFullYear();\n      const genresFormatted = genres.slice(0, 2).join(', ');\n\n      return `\n        <a class=\"gallery__link\">\n          <div class=\"gallery-item\" id=\"${id}\">\n            <img class=\"gallery-item__img\" src=\"${posterUrl}\" loading=\"lazy\" />\n            <p class=\"info-item\">${title}</p>\n            <p class=\"info-item\">${genresFormatted}</p>\n            <p class=\"info-item\">${productionYear}</p>\n          </div>\n        </a>\n      `;\n    });\n\n    hideLoader();\n    renderGallery(moviesWithGenresFormatted);\n    hideNoTitleMessage();\n  } catch (error) {\n    console.log(error.toString());\n    hideLoader();\n    showNoTitleMessage();\n  }\n}\n\nasync function getGenreNames(genreIds) {\n  try {\n    const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1&language=en-US`);\n    const data = await response.json();\n    const genres = data.genres;\n\n    const genreNames = genreIds.map(genreId => {\n      const genre = genres.find(genre => genre.id === genreId);\n      return genre ? genre.name : '';\n    });\n\n    return genreNames.filter(name => name !== '');\n  } catch (error) {\n    console.log(error.toString());\n    return [];\n  }\n}\n\nfunction renderGallery(movies) {\n  gallery.innerHTML = '';\n\n  const markup = movies.join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoader() {\n  loader.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showNoTitleMessage() {\n  notitle.innerText = 'Search result not successful. Enter the correct movie name';\n  notitle.style.display = 'block';\n}\n\nfunction hideNoTitleMessage() {\n  notitle.style.display = 'none';\n}\n\nsearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n  const query = searchInput.value;\n  searchMovies(query);\n  searchInput.value = '';\n});\n"],"names":["$aab16197212dc73e$var$searchForm","document","getElementById","$aab16197212dc73e$var$searchInput","querySelector","$aab16197212dc73e$var$gallery","$aab16197212dc73e$var$loader","$aab16197212dc73e$var$notitle","async","$aab16197212dc73e$var$searchMovies","query","response","fetch","movies","json","results","length","$aab16197212dc73e$var$showNoTitleMessage","$aab16197212dc73e$var$hideLoader","moviePromises","map","movie","Promise","all","$aab16197212dc73e$var$getGenreNames","genre_ids","style","display","moviesWithGenresFormatted","genres","id","poster_path","title","release_date","posterUrl","productionYear","Date","getFullYear","slice","join","innerHTML","markup","insertAdjacentHTML","$aab16197212dc73e$var$renderGallery","error","console","log","toString","genreIds","genreId","genre","find","name","filter","innerText","addEventListener","e","preventDefault","value"],"version":3,"file":"index.815912ee.js.map"}