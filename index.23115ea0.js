const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),o=document.getElementById("loader"),a=document.querySelector(".notitle"),l="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let i={};async function c(e,t=1,o=20){try{n.innerHTML="",s();const a=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${l}&language=en-US&query=${e}&include_adult=false&page=${t}`),c=(await a.json()).results.slice(0,o);r(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:o,release_date:a,genre_ids:l}=e;if(!a||!n||0===l.length)return"";const c=`https://image.tmdb.org/t/p/w500/${n}`,s=new Date(a).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${c}" loading="lazy" />\n    <h4 class="gallery__item-header">${o}</h4>\n    <span class="gallery__item-info">${l.map((e=>i[e])).slice(0,2).join(", ")}</span>\n    <span class="gallery__item-info">${s}</span>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(c),0===c.length?(r(),d(),n.innerHTML='<p class="myfriend"></p>'):u()}catch(e){console.log(e.toString()),r(),d()}}function s(){o.style.display="flex"}function r(){o.style.display="none"}function d(){a.innerText="Search result not successful. Enter the correct movie name.",a.style.display="block"}function u(){a.style.display="none"}r(),e.addEventListener("submit",(e=>{e.preventDefault();c(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l}&language=en-US`),t=(await e.json()).genres;for(const e of t)i[e.id]=e.name}catch(e){console.log(e.toString())}}();const m="e7c806d7ce9bbdf1ef93bebcabbfe0f1",g=document.querySelector(".gallery");async function y(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${m}&page=${e}`),n=await t.json(),o=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${m}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();return function(e,t){g.innerHTML="";const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear();return`\n <a class="gallery__link">\n <div class="gallery__item" id="${o}">\n <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n <h4 class="gallery__item-header">${a}</h4>\n <span class="gallery__item-info">${t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n <span class="gallery__item-info">${c}</span>\n </div>\n </a>\n `})).join("");g.insertAdjacentHTML("afterbegin",n)}(n.results,o),n}catch(e){console.log(e)}}y();const p=document.querySelector(".btnUp");function f(){window.scrollTo({top:0,behavior:"smooth"})}p.style.display="none",window.onscroll=function(){!function(){document.documentElement.scrollTop>200?p.style.display="block":p.style.display="none";p.addEventListener("click",f)}()};const h=document.querySelector(".gallery"),v=document.querySelector(".genre"),_="6fc014c055bacb8460b83603c43b9093";let b="";async function L(e){try{s();const t={Action:28,Adventure:12,Animation:16,Comedy:35,Crime:80,Documentary:99,Drama:18,Family:10751,Fantasy:14,History:36,Horror:27,Music:10402,Mystery:9648,Romance:10749,"Science Fiction":878,"TV Movie":10770,Thriller:53,War:10752,Western:37}[b],n=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${_}&with_genres=${t}&page=${e}`),o=await n.json(),a=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${_}`);return(await e.json()).genres}catch(e){console.log(e)}}();return function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear(),s=t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ");return`\n        <a class="gallery__link">\n          <div class="gallery__item" id="${o}">\n            <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n            <h4 class="gallery__item-header">${a}</h4>\n            <span class="gallery__item-info">${s}</span>\n            \n            <span class="gallery__item-info">${c}</span>\n            \n          </div>\n        </a>\n      `})).join("");h.insertAdjacentHTML("afterbegin",n)}(o.results.slice(0,20),a),r(),o}catch(e){console.log(e)}}v.addEventListener("change",(function(e){h.innerHTML="",u(),b=e.target.value,L(b)}));const S=document.querySelector(".input");let k=S.value;const w=document.querySelector(".gallery"),q=document.querySelector(".genre"),$=document.getElementById("prevBtn"),M=document.getElementById("nextBtn"),E=document.querySelectorAll(".link");let T=1;document.querySelectorAll(".dots");const H=()=>{20==T?(M.disabled=!0,$.disabled=!1):1==T?(M.disabled=!1,$.disabled=!0):($.disabled=!1,M.disabled=!1)};function j(){let e,t;if(E.forEach((e=>{e.classList.remove("invisible")})),T>=E.length/2){if(e=E.length-(T+3),t=T-3-1,e>=0)for(let t=0;t<e;t++)E[T+2+t].classList.add("invisible");if(t>=0)for(let e=0;e<t;e++)E[T-4-e].classList.add("invisible")}else{if(e=T-3-1,t=E.length-(T+3),e>=0)for(let t=0;t<e;t++)E[T-4-t].classList.add("invisible");if(t>=0)for(let e=0;e<t;e++)E[T+2+e].classList.add("invisible")}}E.forEach(((e,t)=>{e.addEventListener("click",(n=>{n.preventDefault(),T=t+1,document.querySelector(".active").classList.remove("active"),e.classList.add("active"),"Choose genre"!==q.value?(w.innerHTML="",L(T)):0!==S.value.length?(w.innerHTML="",c(k,T)):(w.innerHTML="",y(T)),H(),j()}))})),$.addEventListener("click",(()=>{let e=T-1;E[e].classList.remove("active"),E[--e].classList.add("active"),T-=1,"Choose genre"!==q.value?(w.innerHTML="",L(T)):0!==S.value.length?(w.innerHTML="",c(k,T)):(w.innerHTML="",y(T)),H(),j()})),M.addEventListener("click",(()=>{let e=T-1;E[e].classList.remove("active"),E[++e].classList.add("active"),T+=1,"Choose genre"!==q.value?(w.innerHTML="",L(T)):0!==S.value.length?(w.innerHTML="",c(k,T)):(w.innerHTML="",y(T)),j(),H()})),j();const I=document.querySelector(".toggle-icon-sun"),C=document.querySelector(".day-night-switch");function x(){document.body.classList.add("dark__theme"),I.classList.remove("toggle-icon-sun"),I.classList.add("toggle-icon-moon")}function A(){document.body.classList.remove("dark__theme"),I.classList.remove("toggle-icon-moon"),I.classList.add("toggle-icon-sun")}null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode","false"),"true"===localStorage.getItem("darkMode")?(x(),C.checked=!0):(A(),C.checked=!1),C.addEventListener("change",(()=>{C.checked?x():A(),localStorage.setItem("darkMode",C.checked)}));const B=document.querySelector(".backdrop"),D=document.querySelector(".modal__btnClose"),F=document.querySelector(".modal__btnWatched"),N=document.querySelector(".modal__btnQueue"),J=document.querySelector(".modal__moviePoster"),O=document.querySelector(".modal__title"),U=document.querySelector(".modal__about"),W=document.querySelector(".modal__genre"),Y=document.querySelector(".modal__votes"),z=document.querySelector(".modal__popularity"),P=document.querySelector(".modal__originalTitle");let Q;async function R(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1`);return await t.json()}catch(e){console.log(e)}}function V(){B.classList.toggle("is-hidden")}gallery.addEventListener("click",(function(e){e.target.matches("img")&&(Q=e.target.parentNode.id,R(Q).then((e=>{J.setAttribute("src",`https://image.tmdb.org/t/p/w500/${e.poster_path}`),O.textContent=e.title,Y.textContent=`${e.vote_average}/ ${e.vote_count}`,z.textContent=e.popularity,P.textContent=e.original_title,U.textContent=e.overview,W.textContent=e.genres[0].name})),V())})),D.addEventListener("click",V),F.addEventListener("click",(function(){let e=[];localStorage.getItem("watched-films")&&(e=JSON.parse(localStorage.getItem("watched-films"))),R(Q).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("watched-films",JSON.stringify(e))}))})),N.addEventListener("click",(function(){let e=[];localStorage.getItem("queued-films")&&(e=JSON.parse(localStorage.getItem("queued-films"))),R(Q).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("queued-films",JSON.stringify(e))}))})),document.addEventListener("keydown",(function(e){27!==e.keyCode||B.classList.contains("is-hidden")||V()})),B.addEventListener("click",(function(e){e.target===B&&V()}));const G=document.querySelector(".modal-footer"),K=(document.querySelector(".close-footer"),document.querySelector(".open-modal")),X=document.querySelector(".close-modal");K.addEventListener("click",(()=>{G.style.display="block"})),X.addEventListener("click",(()=>{G.style.display="none"}));
//# sourceMappingURL=index.23115ea0.js.map
