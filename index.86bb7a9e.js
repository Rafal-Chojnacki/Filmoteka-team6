const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),o=document.getElementById("loader"),a=document.querySelector(".notitle"),l="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let c={};async function i(e){try{o.style.display="flex";const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${l}&language=en-US&query=${e}&page=1&include_adult=false`),i=(await t.json()).results;r(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:o,release_date:a,genre_ids:l}=e;if(!a||!n||0===l.length)return"";const i=`https://image.tmdb.org/t/p/w500/${n}`,r=new Date(a).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${i}" loading="lazy" />\n    <h4 class="gallery__item-header">${o}</h4>\n    <span class="gallery__item-info">${l.map((e=>c[e])).slice(0,2).join(", ")}</span>\n    <span class="gallery__item-info">${r}</span>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(i),0===i.length?(r(),s()):a.style.display="none"}catch(e){console.log(e.toString()),r(),s()}}function r(){o.style.display="none"}function s(){a.innerText="Search result not successful. Enter the correct movie name.",a.style.display="block"}r(),e.addEventListener("submit",(e=>{e.preventDefault();i(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l}&language=en-US`),t=(await e.json()).genres;for(const e of t)c[e.id]=e.name}catch(e){console.log(e.toString())}}();const d="e7c806d7ce9bbdf1ef93bebcabbfe0f1",u=document.querySelector(".gallery");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${d}`),t=await e.json(),n=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${d}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:c}=e,i=new Date(l).getFullYear();return`\n          <a class="gallery__link">\n            <div class="gallery__item" id="${o}">\n              <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n              <h4 class="gallery__item-header">${a}</h4>\n              <span class="gallery__item-info">${t.filter((e=>c.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n              \n              <span class="gallery__item-info">${i}</span>\n              \n            </div>\n          </a>\n        `})).join("");u.insertAdjacentHTML("afterbegin",n)})(t.results,n)}catch(e){console.log(e)}}();const m=document.querySelector(".btnUp");function g(){window.scrollTo({top:0,behavior:"smooth"})}m.style.display="none",window.onscroll=function(){!function(){document.documentElement.scrollTop>200?m.style.display="block":m.style.display="none";m.addEventListener("click",g)}()};const y=document.querySelector(".toggle-icon-sun"),p=document.querySelector(".day-night-switch");function _(){document.body.classList.add("dark__theme"),y.classList.remove("toggle-icon-sun"),y.classList.add("toggle-icon-moon")}function f(){document.body.classList.remove("dark__theme"),y.classList.remove("toggle-icon-moon"),y.classList.add("toggle-icon-sun")}null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode","false"),"true"===localStorage.getItem("darkMode")?(_(),p.checked=!0):(f(),p.checked=!1),p.addEventListener("change",(()=>{p.checked?_():f(),localStorage.setItem("darkMode",p.checked)}));const h=document.querySelector(".backdrop"),b=document.querySelector(".modal__btnClose"),v=document.querySelector(".modal__btnWatched"),S=document.querySelector(".modal__btnQueue"),k=document.querySelector(".modal__moviePoster"),w=document.querySelector(".modal__title"),q=document.querySelector(".modal__about"),$=document.querySelector(".modal__genre"),L=document.querySelector(".modal__votes"),I=document.querySelector(".modal__popularity"),E=document.querySelector(".modal__originalTitle");let j;async function M(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1`);return await t.json()}catch(e){console.log(e)}}function x(){h.classList.toggle("is-hidden")}gallery.addEventListener("click",(function(e){e.target.matches("img")&&(j=e.target.parentNode.id,M(j).then((e=>{k.setAttribute("src",`https://image.tmdb.org/t/p/w500/${e.poster_path}`),w.textContent=e.title,L.textContent=`${e.vote_average}/ ${e.vote_count}`,I.textContent=e.popularity,E.textContent=e.original_title,q.textContent=e.overview,$.textContent=e.genres[0].name})),x())})),b.addEventListener("click",x),v.addEventListener("click",(function(){let e=[];localStorage.getItem("watched-films")&&(e=JSON.parse(localStorage.getItem("watched-films"))),M(j).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("watched-films",JSON.stringify(e))}))})),S.addEventListener("click",(function(){let e=[];localStorage.getItem("queued-films")&&(e=JSON.parse(localStorage.getItem("queued-films"))),M(j).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("queued-films",JSON.stringify(e))}))}));
//# sourceMappingURL=index.86bb7a9e.js.map
