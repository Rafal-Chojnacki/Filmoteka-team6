const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),a=document.getElementById("loader"),l=document.querySelector(".notitle"),i="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let s={};async function o(e){try{a.style.display="flex";const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${i}&language=en-US&query=${e}&page=1&include_adult=false`),o=(await t.json()).results;c(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:a,release_date:l,genre_ids:i}=e;if(!l||!n||0===i.length)return"";const o=`https://image.tmdb.org/t/p/w500/${n}`,c=new Date(l).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${o}" loading="lazy" />\n    <h4 class="gallery__item-header">${a}</h4>\n    <p class="gallery__item-info">${i.map((e=>s[e])).slice(0,2).join(", ")}</p>\n    <p class="gallery__item-info">${c}</p>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(o),0===o.length?(c(),r()):l.style.display="none"}catch(e){console.log(e.toString()),c(),r()}}function c(){a.style.display="none"}function r(){l.innerText="Search result not successful. Enter the correct movie name.",l.style.display="block"}c(),e.addEventListener("submit",(e=>{e.preventDefault();o(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${i}&language=en-US`),t=(await e.json()).genres;for(const e of t)s[e.id]=e.name}catch(e){console.log(e.toString())}}();const g="e7c806d7ce9bbdf1ef93bebcabbfe0f1",d=document.querySelector(".gallery");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${g}`),t=await e.json(),n=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${g}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:a,title:l,release_date:i,genre_ids:s}=e,o=new Date(i).getFullYear();return`\n          <a class="gallery__link">\n            <div class="gallery__item" id="${a}">\n              <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n              <h4 class="gallery__item-header">${l}</h4>\n              <span class="gallery__item-info">${t.filter((e=>s.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n              \n              <span class="gallery__item-info">${o}</span>\n              \n            </div>\n          </a>\n        `})).join("");d.insertAdjacentHTML("afterbegin",n)})(t.results,n)}catch(e){console.log(e)}}();
//# sourceMappingURL=index.3810f67e.js.map
