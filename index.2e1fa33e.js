const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),a=document.getElementById("loader"),i=document.querySelector(".notitle");async function s(e){try{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1&language=en-US&query=${e}&page=1&include_adult=false`),s=(await t.json()).results;if(0===s.length)return c(),void o();const r=s.map((e=>Promise.all([l(e.genre_ids),e])));a.style.display="flex";const d=(await Promise.all(r)).map((([e,t])=>{const{id:n,poster_path:a,title:i,release_date:s}=t;if(!s||!a||0===e.length)return"";const l=`https://image.tmdb.org/t/p/w500/${a}`,o=new Date(s).getFullYear();return`\n        <a class="gallery__link">\n          <div class="gallery-item" id="${n}">\n            <img class="gallery-item__img" src="${l}" loading="lazy" />\n            <p class="info-item">${i}</p>\n            <p class="info-item">${e.slice(0,2).join(", ")}</p>\n            <p class="info-item">${o}</p>\n          </div>\n        </a>\n      `}));o(),function(e){n.innerHTML="";const t=e.join("");n.insertAdjacentHTML("beforeend",t)}(d),i.style.display="none"}catch(e){console.log(e.toString()),o(),c()}}async function l(e){try{const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1&language=en-US"),n=(await t.json()).genres;return e.map((e=>{const t=n.find((t=>t.id===e));return t?t.name:""})).filter((e=>""!==e))}catch(e){return console.log(e.toString()),[]}}function o(){a.style.display="none"}function c(){i.innerText="Search result not successful. Enter the correct movie name",i.style.display="block"}o(),e.addEventListener("submit",(e=>{e.preventDefault();s(t.value),t.value=""}));const r="e7c806d7ce9bbdf1ef93bebcabbfe0f1",d=document.querySelector(".gallery");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${r}`),t=await e.json();(function(e){const t=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:t,id:n,title:a,release_date:i,genre_ids:s}=e;return`\n          <a class="gallery__link">\n            <div class="gallery__item" id="${n}">\n              <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${t}"/>\n              <h4 class="gallery__item-header"><b>${a}</b></h4>\n              <span class="gallery__item-info"><b>${s}</b></span>\n              \n              <span class="gallery__item-info"><b>${new Date(i).getFullYear()}</b></span>\n              \n            </div>\n          </a>\n        `})).join("");d.insertAdjacentHTML("afterbegin",t)})(t.results)}catch(e){console.log(e)}}(),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${r}`),t=(await e.json()).genres;console.log(t)}catch(e){console.log(e)}}();
//# sourceMappingURL=index.2e1fa33e.js.map
