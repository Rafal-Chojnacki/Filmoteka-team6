const e=document.getElementById("search-form"),t=document.querySelector(".input"),n=document.getElementById("gallery"),o=document.getElementById("loader"),a=document.querySelector(".notitle"),l="e7c806d7ce9bbdf1ef93bebcabbfe0f1";let i={};async function c(e){try{s();const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${l}&language=en-US&query=${e}&page=1&include_adult=false`),o=(await t.json()).results;r(),function(e){n.innerHTML="";const t=e.map((e=>{const{id:t,poster_path:n,title:o,release_date:a,genre_ids:l}=e;if(!a||!n||0===l.length)return"";const c=`https://image.tmdb.org/t/p/w500/${n}`,s=new Date(a).getFullYear();return`\n  <a class="gallery__link">\n  <div class="gallery__item" id="${t}">\n    <img class="gallery__item-img" src="${c}" loading="lazy" />\n    <h4 class="gallery__item-header">${o}</h4>\n    <span class="gallery__item-info">${l.map((e=>i[e])).slice(0,2).join(", ")}</span>\n    <span class="gallery__item-info">${s}</span>\n  </div>\n</a>\n  `})).join("");n.insertAdjacentHTML("beforeend",t)}(o),0===o.length?(r(),d(),n.innerHTML='<p class="myfriend"></p>'):u()}catch(e){console.log(e.toString()),r(),d()}}function s(){o.style.display="flex"}function r(){o.style.display="none"}function d(){a.innerText="Search result not successful. Enter the correct movie name.",a.style.display="block"}function u(){a.style.display="none"}r(),e.addEventListener("submit",(e=>{e.preventDefault();c(t.value),t.value=""})),async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l}&language=en-US`),t=(await e.json()).genres;for(const e of t)i[e.id]=e.name}catch(e){console.log(e.toString())}}();const m="e7c806d7ce9bbdf1ef93bebcabbfe0f1",g=document.querySelector(".gallery");async function y(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${m}&page=${e}`),n=await t.json(),o=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${m}`),t=await e.json();return t.genres}catch(e){console.log(e)}}();return function(e,t){g.innerHTML="";const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear();return`\n <a class="gallery__link">\n <div class="gallery__item" id="${o}">\n <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n <h4 class="gallery__item-header">${a}</h4>\n <span class="gallery__item-info">${t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ")}</span>\n <span class="gallery__item-info">${c}</span>\n </div>\n </a>\n `})).join("");g.insertAdjacentHTML("afterbegin",n)}(n.results,o),n}catch(e){console.log(e)}}y();const p=document.querySelector(".btnUp");function f(){window.scrollTo({top:0,behavior:"smooth"})}p.style.display="none",window.onscroll=function(){!function(){document.documentElement.scrollTop>200?p.style.display="block":p.style.display="none";p.addEventListener("click",f)}()};const h=document.getElementById("prevBtn"),_=document.getElementById("nextBtn"),v=document.querySelectorAll(".link");let b=1;document.querySelectorAll(".dots");const S=()=>{20==b?(_.disabled=!0,h.disabled=!1):1==b?(_.disabled=!1,h.disabled=!0):(h.disabled=!1,_.disabled=!1)};function L(){let e,t;if(v.forEach((e=>{e.classList.remove("invisible")})),b>=v.length/2){if(e=v.length-(b+3),t=b-3-1,e>=0)for(let t=0;t<e;t++)v[b+2+t].classList.add("invisible");if(t>=0)for(let e=0;e<t;e++)v[b-4-e].classList.add("invisible")}else{if(e=b-3-1,t=v.length-(b+3),e>=0)for(let t=0;t<e;t++)v[b-4-t].classList.add("invisible");if(t>=0)for(let e=0;e<t;e++)v[b+2+e].classList.add("invisible")}}v.forEach(((e,t)=>{e.addEventListener("click",(n=>{n.preventDefault(),b=t+1,console.log(b),document.querySelector(".active").classList.remove("active"),e.classList.add("active"),y(b),S(),L()}))})),h.addEventListener("click",(()=>{let e=b-1;v[e].classList.remove("active"),v[--e].classList.add("active"),b-=1,console.log(b),y(b),S(),L()})),_.addEventListener("click",(()=>{let e=b-1;v[e].classList.remove("active"),v[++e].classList.add("active"),b+=1,console.log(b),y(b),L(),S()})),L();const k=document.querySelector(".toggle-icon-sun"),w=document.querySelector(".day-night-switch");function q(){document.body.classList.add("dark__theme"),k.classList.remove("toggle-icon-sun"),k.classList.add("toggle-icon-moon")}function $(){document.body.classList.remove("dark__theme"),k.classList.remove("toggle-icon-moon"),k.classList.add("toggle-icon-sun")}null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode","false"),"true"===localStorage.getItem("darkMode")?(q(),w.checked=!0):($(),w.checked=!1),w.addEventListener("change",(()=>{w.checked?q():$(),localStorage.setItem("darkMode",w.checked)}));const E=document.querySelector(".backdrop"),j=document.querySelector(".modal__btnClose"),M=document.querySelector(".modal__btnWatched"),I=document.querySelector(".modal__btnQueue"),T=document.querySelector(".modal__moviePoster"),C=document.querySelector(".modal__title"),x=document.querySelector(".modal__about"),A=document.querySelector(".modal__genre"),H=document.querySelector(".modal__votes"),B=document.querySelector(".modal__popularity"),D=document.querySelector(".modal__originalTitle");let F;async function N(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=e7c806d7ce9bbdf1ef93bebcabbfe0f1`);return await t.json()}catch(e){console.log(e)}}function J(){E.classList.toggle("is-hidden")}gallery.addEventListener("click",(function(e){e.target.matches("img")&&(F=e.target.parentNode.id,N(F).then((e=>{T.setAttribute("src",`https://image.tmdb.org/t/p/w500/${e.poster_path}`),C.textContent=e.title,H.textContent=`${e.vote_average}/ ${e.vote_count}`,B.textContent=e.popularity,D.textContent=e.original_title,x.textContent=e.overview,A.textContent=e.genres[0].name})),J())})),j.addEventListener("click",J),M.addEventListener("click",(function(){let e=[];localStorage.getItem("watched-films")&&(e=JSON.parse(localStorage.getItem("watched-films"))),N(F).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("watched-films",JSON.stringify(e))}))})),I.addEventListener("click",(function(){let e=[];localStorage.getItem("queued-films")&&(e=JSON.parse(localStorage.getItem("queued-films"))),N(F).then((t=>{for(let n=0;n<e.length;n++)if(e[n].id===t.id)return void alert("Movie is already in library");e.push(t),localStorage.setItem("queued-films",JSON.stringify(e))}))})),document.addEventListener("keydown",(function(e){27!==e.keyCode||E.classList.contains("is-hidden")||J()})),E.addEventListener("click",(function(e){e.target===E&&J()}));const O=document.querySelector(".modal-footer"),U=(document.querySelector(".close-footer"),document.querySelector(".open-modal")),W=document.querySelector(".close-modal");U.addEventListener("click",(()=>{O.style.display="block"})),W.addEventListener("click",(()=>{O.style.display="none"}));const Y=document.querySelector(".gallery"),z=document.querySelector(".genre"),P="6fc014c055bacb8460b83603c43b9093";let Q="";z.addEventListener("change",(function(e){Y.innerHTML="",u(),Q=e.target.value,async function(e){try{s();const t=function(e){return{Action:28,Adventure:12,Animation:16,Comedy:35,Crime:80,Documentary:99,Drama:18,Family:10751,Fantasy:14,History:36,Horror:27,Music:10402,Mystery:9648,Romance:10749,"Science Fiction":878,"TV Movie":10770,Thriller:53,War:10752,Western:37}[e]}(e),n=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${P}&with_genres=${t}`),o=await n.json(),a=await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${P}`);return(await e.json()).genres}catch(e){console.log(e)}}();(function(e,t){const n=e.sort(((e,t)=>t.popularity-e.popularity)).map((e=>{const{poster_path:n,id:o,title:a,release_date:l,genre_ids:i}=e,c=new Date(l).getFullYear(),s=t.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", ");return`\n        <a class="gallery__link">\n          <div class="gallery__item" id="${o}">\n            <img class="gallery__item-img" src="https://image.tmdb.org/t/p/w500/${n}"/>\n            <h4 class="gallery__item-header">${a}</h4>\n            <span class="gallery__item-info">${s}</span>\n            \n            <span class="gallery__item-info">${c}</span>\n            \n          </div>\n        </a>\n      `})).join("");Y.insertAdjacentHTML("afterbegin",n)})(o.results,a),r()}catch(e){console.log(e)}}(Q)}));
//# sourceMappingURL=index.fee42abf.js.map
